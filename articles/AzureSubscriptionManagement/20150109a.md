---
title: 仮想マシンの課金の仕組み
date: 2015-1-9 3:41
tags:
 - Virtual Machine
---
Microsoft Azure にて最も人気のある機能の 1 つに「仮想マシン」があります。仮想マシンは、VHD のデータ保存にストレージを利用したり、データ通信があったりとするため、どこでどの課金が発生するかについては、事前に仕組みを知っている必要があります。本トピックでは、仮想マシンをご利用の際に発生する課金について説明をいたします。

## 仮想マシンを構成する要素

まず、仮想マシンの各要素説明すると、仮想マシンは下記のような組み合わせで構成されています。

-   コンピュート要素 (CPU, メモリ , ハードウェア要素)
-   ディスク要素
-   ネットワーク要素

これらが組み合わさり、仮想マシン機能を構築していますが、各要素について、順番に課金の仕組みについて説明をします。

## コンピュート要素について

コンピュートについては、 CPU やメモリを割り当てた時点から課金が発生するもので、課金料金は下記の通りです。

-   [Virtual Machines の料金詳細](http://azure.microsoft.com/ja-jp/pricing/details/virtual-machines/)

コンピュート部分の課金の基本的な考え方は、「 CPU やメモリなどリソースを割り当てて動作」がベースとなります。そのため、リソースを割り当てている限りは課金は発生し続けます。課金で、Windows と Linux で料金が異なるのは、Windows は Windows 自体のライセンス料が含まれるためです。仮想マシンの課金は時間ごとに課金され、割り当てがされている時間の分だけ課金が発生します。課金を停止するにはポータルから停止し、「割り当て解除済み」状態にすることで、 CPU およびメモリが解放され課金を停止することができます。

また、SQL Server が既にインストールされた仮想マシンも作成できますが、こちらは仮想マシン自身の料金とは別に SQL Server の課金も発生します。課金のページでは、下記の通り SQL Server の料金のページがあります。

-   [Virtual Machines の料金詳細 – SQL Server](http://azure.microsoft.com/ja-jp/pricing/details/virtual-machines/#Sql)

ここに表示される料金は、SQL Server 自体の課金 (ライセンス料) であり Windows サーバーの料金は含まれていないので注意してください。SQL Server が含まれたイメージから仮想マシンを作成した場合には、以下のような課金が発生します。

-   Windows 仮想マシンの課金料金
-   SQL Server のライセンス使用料金

こちらは、くれぐれも注意してご活用ください。

※注意点１

A0 ～ A4 をご利用の際には、利用料レポートには A1 の利用量をベースとして記載されます。例えば、A3 を 3 日間利用した場合には、コア数 4 個使うため、以下の計算式で A1 インスタンス分に換算されて利用料が計上されます。

-   24 (時間) x 3 (日間) x 4 (コア)  = 288 (A1 インスタンス時間)

## ディスク要素について

仮想マシンの OS イメージが保存されたディスクは、C ドライブに割り当てがされ、仮想ディスクファイル (\*.VHD ファイル) が利用されています。そしてその実体は、作成時に指定するストレージサービスに保存がされております。例を挙げると、各仮想マシンには、以下のような VHD ディスクへのパスの設定がされており、各ディスクの情報がストレージサービス上に保存がされています。

-   [https://xxx.blob.core.windows.net/vhds/xxx-xxx-2014-05-01.vhd](https://xxx.blob.core.windows.net/vhds/xxx-xxx-2014-05-01.vhd)

VHD ディスクはストレージ上に保存されているため、ディスクの利用料金はストレージ料金として別途計上されることになります。料金については、以下のページをご参照ください。

-   [Storage (ストレージ サービス) の料金詳細](http://azure.microsoft.com/ja-jp/pricing/details/storage/)  
    「ページ BLOB とディスク」の表をご参照ください

また、ストレージサービスにアクセスすると、トランザクション量も発生するので、その分も課金が発生します。

※注意点 1

VHD 仮想ディスクは、表示される仮想ディスクの容量がそのまま課金されるわけではありません。例えば、Windows Server 2012 の仮想マシンを作成すると、最大サイズ 127 GB の VHD がストレージサービスの中に作成されます。しかし、127 GB そのまますべて課金がされるわけではなく、VHD ファイルの内部で使われている領域のみが課金されます。127 GB 中、OS のイメージが 8 GB であり、それしか利用していないのであれば、課金は 8 GB 分のみになります。

※注意点 2

仮想マシンを作成すると、自動でもう一つ一時ディスク (Windows の場合には D ドライブ、Linux の場合には /dev/sdb) が作成されます。このディスクは一時ディスクであり、ストレージ上に実体を持っていません。一時ディスクに永続的なデータを保存しないでください。このディスクは、アプリケーションとプロセス用の一時的な利用のためのストレージを提供し、ページ ファイルやスワップ ファイルなどの一時的なデータを保存するために使用されます。 


## ネットワーク要素について

仮想マシンで外部インターネット環境を通して通信をした際に、以下の 2 つの種類の通信が発生します。

-   インバウンド通信 (外部から Azure 内部へ)
-   アウトバウンド通信 ( Azure 内部から外部へ)

インバウンドについては Microsoft Azure では無料となりますが、アウトバウンドについては利用量に応じて課金が発生します。これは、通信総量のバイト単位で課金が発生します。詳細については下記のデータ通信量のドキュメントをご参考ください。

-   [データ転送の料金詳細](http://azure.microsoft.com/ja-jp/pricing/details/data-transfers/)

\--  
Microsoft Azure サポートチーム